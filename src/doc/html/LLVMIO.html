<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module LLVMIO</title>
<meta name="description" content="Documentation of Coq module LLVMIO" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module LLVMIO</h1>
<div class="coq">
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ZArith</span> <span class="id">List</span> <span class="id">String</span> <span class="id">Omega</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Vellvm.Classes</span> <span class="id">Vellvm.Util</span> <span class="id">Vellvm.Trace</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Vellvm.MemoryAddress</span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">Vellvm.DynamicValues</span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<span class="kwd">Set</span> <span class="id">Contextual</span> <span class="kwd">Implicit</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">dtyp</span> : <span class="kwd">Set</span> :=<br/>
| <span class="id">DTYPE_I</span> (<span class="id">sz</span>:<span class="id">Z</span>)<br/>
| <span class="id">DTYPE_Pointer</span><br/>
| <span class="id">DTYPE_Void</span><br/>
| <span class="id">DTYPE_Half</span><br/>
| <span class="id">DTYPE_Float</span><br/>
| <span class="id">DTYPE_Double</span><br/>
| <span class="id">DTYPE_X86_fp80</span><br/>
| <span class="id">DTYPE_Fp128</span><br/>
| <span class="id">DTYPE_Ppc_fp128</span><br/>
| <span class="id">DTYPE_Metadata</span><br/>
| <span class="id">DTYPE_X86_mmx</span><br/>
| <span class="id">DTYPE_Array</span> (<span class="id">sz</span>:<span class="id">Z</span>) (<span class="id">t</span>:<span class="id">dtyp</span>)<br/>
| <span class="id">DTYPE_Struct</span> (<span class="id">fields</span>:<span class="id">list</span> <span class="id">dtyp</span>)<br/>
| <span class="id">DTYPE_Packed_struct</span> (<span class="id">fields</span>:<span class="id">list</span> <span class="id">dtyp</span>)<br/>
| <span class="id">DTYPE_Opaque</span><br/>
| <span class="id">DTYPE_Vector</span> (<span class="id">sz</span>:<span class="id">Z</span>) (<span class="id">t</span>:<span class="id">dtyp</span>)     <br/>
.<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Type</span> <span class="id">LLVM_INTERACTIONS</span> (<span class="id">ADDR</span> : <span class="id">MemoryAddress.ADDRESS</span>).<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id">eq_dec_addr</span> : <span class="id">eq_dec</span> <span class="id">ADDR.addr</span> := <span class="id">ADDR.addr_dec</span>.<br/>
&nbsp;&nbsp;<br/>
<br/>
<br/>
<span class="kwd">Module</span> <span class="id">DV</span> := <span class="id">DynamicValues.DVALUE</span>(<span class="id">ADDR</span>).<br/>
<span class="kwd">Export</span> <span class="id">DV</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">IO</span> : <span class="kwd">Type</span> -&gt; <span class="kwd">Type</span> :=<br/>
| <span class="id">Alloca</span> : <span class="kwd">forall</span> (<span class="id">t</span>:<span class="id">dtyp</span>), (<span class="id">IO</span> <span class="id">dvalue</span>)<br/>
| <span class="kwd">Load</span>   : <span class="kwd">forall</span> (<span class="id">t</span>:<span class="id">dtyp</span>) (<span class="id">a</span>:<span class="id">dvalue</span>), (<span class="id">IO</span> <span class="id">dvalue</span>)<br/>
| <span class="id">Store</span>  : <span class="kwd">forall</span> (<span class="id">a</span>:<span class="id">dvalue</span>) (<span class="id">v</span>:<span class="id">dvalue</span>), (<span class="id">IO</span> <span class="id">unit</span>)<br/>
| <span class="id">GEP</span>    : <span class="kwd">forall</span> (<span class="id">t</span>:<span class="id">dtyp</span>) (<span class="id">v</span>:<span class="id">dvalue</span>) (<span class="id">vs</span>:<span class="id">list</span> <span class="id">dvalue</span>), (<span class="id">IO</span> <span class="id">dvalue</span>)<br/>
| <span class="id">ItoP</span>   : <span class="kwd">forall</span> (<span class="id">i</span>:<span class="id">dvalue</span>), (<span class="id">IO</span> <span class="id">dvalue</span>)<br/>
| <span class="id">PtoI</span>   : <span class="kwd">forall</span> (<span class="id">a</span>:<span class="id">dvalue</span>), (<span class="id">IO</span> <span class="id">dvalue</span>)<br/>
| <span class="id">Call</span>   : <span class="kwd">forall</span> (<span class="id">t</span>:<span class="id">dtyp</span>) (<span class="id">f</span>:<span class="id">string</span>) (<span class="id">args</span>:<span class="id">list</span> <span class="id">dvalue</span>), (<span class="id">IO</span> <span class="id">dvalue</span>)<br/>
.    <br/>
<br/>
<span class="kwd">Definition</span> <span class="id">Trace</span> <span class="id">X</span> := <span class="id">M</span> <span class="id">IO</span> <span class="id">X</span>.<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id">functor_trace</span> : <span class="id">Functor</span> <span class="id">Trace</span> := (@<span class="id">mapM</span> <span class="id">IO</span>).<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id">monad_trace</span> : (@<span class="id">Monad</span> <span class="id">Trace</span>) (@<span class="id">mapM</span> <span class="id">IO</span>) := { <span class="id">mret</span> <span class="id">X</span> <span class="id">x</span> := <span class="id">Ret</span> <span class="id">x</span>; <span class="id">mbind</span> := @<span class="id">bindM</span> <span class="id">IO</span> }.<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id">exn_trace</span> : (@<span class="id">ExceptionMonad</span> <span class="id">string</span> <span class="id">Trace</span> <span class="id">_</span> <span class="id">_</span>) :=<br/>
&nbsp;&nbsp;{| <span class="id">raise</span> := <span class="kwd">fun</span> <span class="id">_</span> <span class="id">s</span> =&gt; <span class="id">Err</span> <span class="id">s</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">catch</span> := <span class="kwd">fun</span> <span class="id">_</span> <span class="id">e</span> <span class="id">k</span> =&gt; <span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">Err</span> <span class="id">e</span> =&gt; <span class="id">k</span> <span class="id">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;|}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">lift_err_d</span> {<span class="id">A</span> <span class="id">X</span>} (<span class="id">m</span>:<span class="id">err</span> <span class="id">A</span>) (<span class="id">f</span>: <span class="id">A</span> -&gt; <span class="id">Trace</span> <span class="id">X</span>) : <span class="id">Trace</span> <span class="id">X</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">m</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">inl</span> <span class="id">s</span> =&gt; <span class="id">raise</span> <span class="id">s</span><br/>
&nbsp;&nbsp;| <span class="id">inr</span> <span class="id">b</span> =&gt; <span class="id">f</span> <span class="id">b</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Notation</span> "'<span class="tactic">do</span>' <span class="id">x</span> &lt;- <span class="id">m</span> ; <span class="id">f</span>" := (<span class="id">lift_err_d</span> <span class="id">m</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">f</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">at</span> <span class="id">level</span> 200, <span class="id">x</span> <span class="id">ident</span>, <span class="id">m</span> <span class="tactic">at</span> <span class="id">level</span> 100, <span class="id">f</span> <span class="tactic">at</span> <span class="id">level</span> 200).<br/>
<br/>
<br/>
<span class="kwd">End</span> <span class="id">LLVM_INTERACTIONS</span>.<br/>
<br/>
&nbsp;&nbsp;<br/>
<span class="kwd">Module</span> <span class="id">Make</span>(<span class="id">ADDR</span> : <span class="id">MemoryAddress.ADDRESS</span>) &lt;: <span class="id">LLVM_INTERACTIONS</span>(<span class="id">ADDR</span>).<br/>
<span class="kwd">Include</span> <span class="id">LLVM_INTERACTIONS</span>(<span class="id">ADDR</span>).<br/>
<span class="kwd">End</span> <span class="id">Make</span>.<br/>
<br/>
</div>
<div class="footer"><hr/>Generated by coq2html</div>
</body>
</html>
